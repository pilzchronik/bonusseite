<div class="start-suche-wrapper">
  <div class="start-suche-label">Archiv durchsuchen (mind. 3 Zeichen):</div>
  <div id="startsuche"></div>
  <div class="start-suche-hinweis">Durchsucht lokal alle Inhalte dieser Chronik.</div>
</div>

<link rel="stylesheet" href="{{ '/pagefind/pagefind-ui.css' | relative_url }}">
<script src="{{ '/pagefind/pagefind-ui.js' | relative_url }}"></script>

<script>
  window.addEventListener('load', function () {
    new PagefindUI({
      element: "#startsuche",
      showSubResults: true,
      excerptLength: 25, // Etwas kürzer für kompaktere Optik
      debounceTimeoutMs: 300, // Erhöht für ruhigeres Tippgefühl
      showImages: false, // Textfokus (Buch-Charakter)
      processTerm: function (term) {
        // Suchbegriff bereinigen
        term = (term || "").trim();
        // Erst ab 3 Zeichen suchen, sonst leeres Ergebnis liefern
        if (term.length < 3) return "";
        return term;
      },
      translations: {
        placeholder: "Suchbegriff eingeben...",
        clear_search: "Löschen",
        load_more: "Mehr Ergebnisse laden",
        search_label: "Suche",
        filters_label: "Filter",
        zero_results: "Keine Treffer für „[SEARCH_TERM]“ gefunden.",
        many_results: "[COUNT] Treffer für „[SEARCH_TERM]“",
        one_result: "Ein Treffer für „[SEARCH_TERM]“",
        alt_search: "Keine Treffer für „[SEARCH_TERM]“. Meintest du stattdessen: [DIFFERENT_TERM]?",
        search_suggestion: "Meintest du [SEARCH_TERM]?",
        searching: "Suche läuft..."
      }
    });
  });
</script>

<style>
  .start-suche-wrapper {
    max-width: 500px;
    margin: 25px auto 0 auto; /* Abstand nach oben zum Text */
    text-align: left;
    background: #fafafa; /* Ganz leichtes Grau zur Abgrenzung */
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #eee;
  }
  
  .start-suche-label {
    font-size: 0.9rem;
    font-weight: 600;
    color: #555;
    margin-bottom: 8px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
  }

  .start-suche-hinweis {
    font-size: 0.8rem;
    color: #888;
    margin-top: 8px;
    text-align: center;
  }

  /* Pagefind UI Anpassungen für "Buch-Look" */
  .pagefind-ui__search-input {
    border: 1px solid #ccc !important;
    font-size: 1rem !important;
    padding: 10px 15px !important;
    border-radius: 6px !important;
    background-color: #fff !important;
  }
  
  .pagefind-ui__search-input:focus {
    outline: 2px solid #ccc;
    border-color: #999 !important;
  }

  .pagefind-ui__result {
    border-bottom: 1px solid #eee !important;
    padding: 10px 0 !important;
  }
  
  .pagefind-ui__result-title {
    font-size: 1.1em !important;
    font-weight: bold;
    color: #333 !important;
  }

  .pagefind-ui__result-excerpt {
    font-size: 0.95em !important;
    color: #555 !important;
    font-weight: normal !important;
  }
  
  /* Versteckt den Pagefind-Button "Filter", da wir keine Filter nutzen */
  .pagefind-ui__filter-panel {
    display: none;
  }
</style>
